(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(26)},26:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(15),l=a.n(r),s=a(6),c=a(7),o=a(9),p=a(8),u=a(10),h=a(28),d=a(29),m=a(30),f=function(e){return i.a.createElement("header",null,i.a.createElement("img",{src:"/images/pirtate-flag.jpg",alt:"Logo"}),i.a.createElement("ul",null,i.a.createElement("li",{className:"navLink"},i.a.createElement("a",{href:"/pirates"},"Pirates")),i.a.createElement("li",{className:"navLink"},i.a.createElement("a",{href:"/pirates/new"},"Create pirate")),i.a.createElement("li",{className:"navLink"},i.a.createElement("a",{href:"/ships"},"Ships")),i.a.createElement("li",{className:"navLink"},i.a.createElement("a",{href:"/raids"},"Raids"))))},E=a(3),v=a(27),b=function(e){var t=e.pirate;if(!t)return"Loading...";var a="/pirates/"+t.id;return i.a.createElement(n.Fragment,null,i.a.createElement(v.a,{to:a,className:"name"},t.firstName," ",t.lastName),i.a.createElement("p",null,"Age: ",t.age),i.a.createElement("p",null,"Ship: ",t.ship.name))},g=function(e){if(0===e.pirates.length)return i.a.createElement("p",null,"Loading...");var t=e.pirates.map(function(e,t){return i.a.createElement("li",{key:t,className:"component-item"},i.a.createElement("div",{className:"component"},i.a.createElement(b,{pirate:e})))});return i.a.createElement("ul",{className:"component-list"},t)},y=function(e){var t=e.pirate,a=e.raids,n=e.onDelete,r=e.onUpdate;if(!t)return"Loading...";var l=t.raids.map(function(e,a){return i.a.createElement("li",{key:a},e.location," ",i.a.createElement("button",{onClick:function(){return e=a,t.raids.splice(e,1),void r(t);var e}},"Delete"))}),s="/pirates/"+t.id+"/edit",c=a.map(function(e,a){return function(e){return t.raids.some(function(t){return e.id===t.id})}(e)?null:i.a.createElement("option",{key:a,value:a},e.location)});return i.a.createElement("div",{className:"component"},i.a.createElement(b,{pirate:t}),i.a.createElement("p",null,"Raids:"),i.a.createElement("ul",null,l),i.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=parseInt(e.target.raids.value),i=a[n];t.raids.push(i),r(t)}},i.a.createElement("select",{name:"raids"},c),i.a.createElement("input",{type:"submit",value:"Add Raid"})),i.a.createElement("button",{onClick:function(){n(t.id)}},"Delete ",t.firstName),i.a.createElement(v.a,{to:s},i.a.createElement("button",{type:"button"},"Edit ",t.firstName)))},j=function(){function e(){Object(s.a)(this,e),this.base="https://jens-pirates.herokuapp.com"}return Object(c.a)(e,[{key:"get",value:function(e){return fetch(this.base+e).then(function(e){return e.json()})}},{key:"delete",value:function(e){return fetch(this.base+e,{method:"DELETE",headers:{"Content-Type":"application/json"}})}},{key:"post",value:function(e,t){return fetch(this.base+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}},{key:"patch",value:function(e,t){return fetch(this.base+e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}}]),e}(),k=a(17),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={pirate:{firstName:"",lastName:"",age:0,ship:null}},a.handleChange=a.handleChange.bind(Object(E.a)(Object(E.a)(a))),a.handleShip=a.handleShip.bind(Object(E.a)(Object(E.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(E.a)(Object(E.a)(a))),a.findShipIndex=a.findShipIndex.bind(Object(E.a)(Object(E.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.pirate&&this.setState({pirate:Object(k.a)({},this.props.pirate)})}},{key:"findShipIndex",value:function(){var e=this;return this.props.pirate?this.props.ships.findIndex(function(t){return e.props.pirate.ship.id===t.id}):null}},{key:"handleChange",value:function(e){var t=e.target.name,a=this.state.pirate;a[t]=e.target.value,this.setState({pirate:a})}},{key:"handleShip",value:function(e){var t=parseInt(e.target.value),a=this.props.ships[t],n=this.state.pirate;n.ship=a,this.setState({pirate:n})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.pirate.id?this.props.onUpdate(this.state.pirate):(console.log("Called"),this.props.onCreate(this.state.pirate))}},{key:"render",value:function(){if(0===this.props.ships.length)return i.a.createElement("p",null,"Loading...");var e=this.props.ships.map(function(e,t){return i.a.createElement("option",{key:e.id,value:t},e.name)}),t="";return t=this.props.pirate?"Edit "+this.props.pirate.firstName:"Create Pirate",i.a.createElement("div",null,i.a.createElement("h3",null,t),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("input",{type:"text",placeholder:"First Name",name:"firstName",onChange:this.handleChange,value:this.state.pirate.firstName}),i.a.createElement("input",{type:"text",placeholder:"Last Name",name:"lastName",onChange:this.handleChange,value:this.state.pirate.lastName}),i.a.createElement("input",{type:"number",placeholder:"Age",name:"age",onChange:this.handleChange,value:this.state.pirate.age}),i.a.createElement("select",{name:"ship",onChange:this.handleShip,defaultValue:this.findShipIndex()||"select-ship"},i.a.createElement("option",{disabled:!0,value:"select-ship"},"Select a ship"),e),i.a.createElement("button",{type:"submit"},"Save")))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(p.a)(t).call(this,e))).state={pirates:[],ships:[],raids:[]},a.findPirateById=a.findPirateById.bind(Object(E.a)(Object(E.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new j,a=t.get("/api/pirates"),n=t.get("/api/ships"),i=t.get("/api/raids");Promise.all([a,n,i]).then(function(t){e.setState({pirates:t[0],ships:t[1],raids:t[2]})})}},{key:"findPirateById",value:function(e){return this.state.pirates.find(function(t){return t.id===parseInt(e)})}},{key:"handleDelete",value:function(e){var t="/api/pirates/"+e;(new j).delete(t).then(function(){return window.location="/pirates"})}},{key:"handlePost",value:function(e){(new j).post("/api/pirates",e).then(function(){return window.location="/pirates"})}},{key:"handleUpdate",value:function(e){(new j).patch("/api/pirates/"+e.id,e).then(function(){window.location="/pirates/"+e.id})}},{key:"render",value:function(){var e=this;return this.state.pirates?i.a.createElement(h.a,null,i.a.createElement(n.Fragment,null,i.a.createElement(d.a,null,i.a.createElement(m.a,{exact:!0,path:"/pirates/new",render:function(t){return i.a.createElement(O,{ships:e.state.ships,onCreate:e.handlePost})}}),i.a.createElement(m.a,{exact:!0,path:"/pirates/:id/edit",render:function(t){var a=t.match.params.id,n=e.findPirateById(a);return i.a.createElement(O,{pirate:n,ships:e.state.ships,raids:e.state.raids,onUpdate:e.handleUpdate})}}),i.a.createElement(m.a,{exact:!0,path:"/pirates/:id",render:function(t){var a=t.match.params.id,n=e.findPirateById(a);return i.a.createElement(y,{pirate:n,onDelete:e.handleDelete,onUpdate:e.handleUpdate,raids:e.state.raids})}}),i.a.createElement(m.a,{render:function(t){return i.a.createElement(g,{pirates:e.state.pirates})}})))):null}}]),t}(n.Component),w=function(){return i.a.createElement(h.a,null,i.a.createElement(n.Fragment,null,i.a.createElement(f,null),i.a.createElement(d.a,null,i.a.createElement(m.a,{path:"/pirates",component:S}))))},C=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(w,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,2,1]]]);
//# sourceMappingURL=main.3f039317.chunk.js.map